#!/bin/bash
#source $HOME/.local/bin/colors.mb4.sh

GREEN='\033[32m'	#	${GREEN}		# Ð·ÐµÐ»Ñ‘Ð½Ñ‹Ð¹ Ñ†Ð²ÐµÑ‚ Ð·Ð½Ð°ÐºÐ¾Ð²
BGRED='\033[41m'	# ÐšÑ€Ð°ÑÐ½Ñ‹Ð¹ Ñ„Ð¾Ð½
NORMAL='\033[0m'	# Ð¡Ð±Ñ€Ð¾Ñ Ñ†Ð²ÐµÑ‚Ð°

THRESHOLD=80 # ÐŸÐ¾Ñ€Ð¾Ð³Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð¸ÑÐºÐ° Ð² Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°Ñ…

echo -e "${GREEN}Ð’ÑÐµ Ð´Ð¸ÑÐºÐ¸:${NORMAL}"
	#-e: Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ escape-Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸.
df -h | grep '^/dev/sd' | awk '{print $1, $2, $3, $4, $5, $6}'

echo -e "\nðŸ“Š ${GREEN}Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¸ÑÐºÐ¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð°:${NORMAL}"
df -h | awk 'NR==1 || ($1 ~ /^\/dev\/sd/ && $5+0 > '"$THRESHOLD"') {print}'

echo -e "\nðŸ” ${GREEN}ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»Ñ‹...${NORMAL}"
df -h | awk -v threshold="$THRESHOLD" -v bgred="$BGRED" -v normal="$NORMAL" 'NR>1 {gsub("%","",$5); if ($5 >= threshold) print bgred "âš  Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ:" normal " " $1 " (" $6 ") Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½ Ð½Ð° " $5 "%"}'
